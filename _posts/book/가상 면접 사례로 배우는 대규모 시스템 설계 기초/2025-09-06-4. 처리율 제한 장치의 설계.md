---
title: "[Book - 가상 면접 사례로 배우는 대규모 시스템 설계 기초] 4. 처리율 제한 장치의 설계"
date: 2025-09-06 21:00:00 +0900
categories: [Book - 가상 면접 사례로 배우는 대규모 시스템 설계 기초]
tags: [book, System Design Interview]
---

설계에 앞서, API에 처리율 제한 장치를 두면 좋은 점을 살펴보자.
* DoS 공격에 의한 자원 고갈을 방지할 수 있다.
* 비용을 절감한다.
  * 서버를 많이 두지 않아도 된다.
  * 우선순위가 높은 API에 더 많은 자원을 할당할 수 있다.
* 서버 과부하를 막는다. (트래픽 제어)

# 1단계 문제 이해 및 설계 범위 확정
면접관과 소통하여 어떤 제한 장치를 구현해야 하는지 정하자.

# 2단계 개략적 설계안 제시 및 동의 구하기
복잡함을 피하고, 기본적인 클라이언트-서버 통신 모델을 사용하도록 하자.

## 처리율 제한 장치는 어디에 둘 것인가?
* 클라이언트 측에 두기
  * 클라이언트의 요청은 쉽게 위변조가 가능해 안정적이지 못하다.
* API 서버 측에 두기
  ```mermaid
  flowchart LR
      Client[클라이언트] -->|HTTP 요청| APIServer[API 서버 / 처리율 제한 장치]
  ```
* 미들웨어로 두기
  * API 서버로 가는 요청을 통제함
  ```mermaid
  flowchart LR
    %% 클라이언트 → 미들웨어
    Client[클라이언트] --> Middleware[미들웨어 / 처리율 제한 장치]
    Client -->|X| Middleware
    Middleware -->|429: Too many requests| Client

    %% 미들웨어 → API 서버
    Middleware --> APIServer[API 서버]
    Middleware --> APIServer
  ```
  > 폭넓게 채택된 기술인 클라우드 마이크로서비스의 경우, 처리율 제한 장치는 보통 API 게이트웨이라 불리는 컴포넌트에 구현되며, 이를 API 게이트웨이 패턴이라고 부른다.

처리율 제한 서비스를 직접 만드는 데에 시간이 들기 때문에 구현할 인력이 충분치 않으면 사용 API 게이트웨이를 쓰는 것은 어떨까?

## 처리율 제한 알고리즘


